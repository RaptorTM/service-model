pipeline {
    agent any

    stages {
        stage('Run main.groovy') {
            steps {
                script {
                    def support = load 'src/modules/support.groovy'
                    support.load_sm_classes()

                    echo "!!!!!!!!!!!!!!!!!! JENKINS_HOME: ${JENKINS_HOME}"
                    println "!!!!!!!!!!!!!!!!!! Current Folder !!!!!!!!!!!!!!!!!!!!!!!!"
                    bat "echo Current Directory: %CD%"
                    bat(returnStdout: true, script: 'dir')

//                     load 'src/init.groovy'
                    def serviceModelScript = load 'src/modules/config/serviceModel.groovy'
                    def serviceModelM = new serviceModelScript
                    serviceModelM.getConfig()

                    def Services = serviceInfo.getServiceInfoByName('uber-bff', serviceModelM)
                    println Services['dockerfile']
                }
            }
        }
    }
}